# –ü–ª–∞–Ω –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –¥–ª—è v1.3

## üéØ –¶–µ–ª—å –º–æ–¥–µ–ª–∏

### –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞
- **–†–µ–≥—Ä–µ—Å—Å–∏—è:** –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ `target_band_overall` (0.5-band —à–∫–∞–ª–∞)
- **Loss:** MSE / MAE
- **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞:** Round to 0.5-band (`round(pred * 2) / 2`)

### Multi-task (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏)
- **Subscores:** FC, LR, GRA, PR –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ –≥–æ–ª–æ–≤—ã
- **Weight:** –ú–æ–∂–Ω–æ –≤–∑–≤–µ—à–∏–≤–∞—Ç—å –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Overall –≤–∞–∂–Ω–µ–µ)

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:** Low / Mid / High –¥–ª—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
- **Part prediction:** –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —á–∞—Å—Ç–∏ (1/2/3) –∫–∞–∫ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞

## üìä –ú–µ—Ç—Ä–∏–∫–∏

### –†–µ–≥—Ä–µ—Å—Å–∏—è
- **MAE** (Mean Absolute Error) –ø–æ —Å—ã—Ä–æ–º—É `pred`
- **MSE** (Mean Squared Error)
- **RMSE** (Root Mean Squared Error)

### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (–ø–æ—Å–ª–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏)
- **Accuracy within ¬±0.5:** `|pred_rounded - true| <= 0.5`
- **Accuracy within ¬±1.0:** `|pred_rounded - true| <= 1.0`

### Per-segment –º–µ—Ç—Ä–∏–∫–∏
- **–ü–æ —á–∞—Å—Ç—è–º:** Part 1, Part 2, Part 3 –æ—Ç–¥–µ–ª—å–Ω–æ
- **–ü–æ –±—ç–Ω–¥–∞–º:** Low (‚â§5.5), Mid (6.0-6.5), High (‚â•7.0)

## üîß –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### Split
- **Train:** 3376 –æ—Ç–≤–µ—Ç–æ–≤ (79.2%)
- **Val:** 398 –æ—Ç–≤–µ—Ç–æ–≤ (9.3%)
- **Test:** 490 –æ—Ç–≤–µ—Ç–æ–≤ (11.5%)
- **–í–∞–∂–Ω–æ:** –ù–µ—Ç —É—Ç–µ—á–∫–∏ –ø–æ `session_id`

### Sample Weights
- **Normal:** weight = 1.0 (3714 –æ—Ç–≤–µ—Ç–æ–≤)
- **Inconsistent (weighted):** weight = 0.4-0.6 (550 –æ—Ç–≤–µ—Ç–æ–≤)
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** `use_sample_weights=True` –≤ loss

### Features
- **Text:** `answer_text` (–æ—Å–Ω–æ–≤–Ω–æ–π)
- **Metadata:** `part`, `duration_sec`, `quality_flag`, `source_type`

## üöÄ –ú–æ–¥–µ–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. Baseline (TF-IDF + LightGBM)
- **–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- **–í—Ä–µ–º—è:** ~5 –º–∏–Ω—É—Ç
- **–û–∂–∏–¥–∞–µ–º—ã–π MAE:** ~0.4-0.5

### 2. Encoder-based (DistilBERT)
- **–¶–µ–ª—å:** –û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å
- **–í—Ä–µ–º—è:** ~30 –º–∏–Ω—É—Ç –Ω–∞ GPU
- **–û–∂–∏–¥–∞–µ–º—ã–π MAE:** ~0.3-0.4

### 3. Multi-task Encoder
- **–¶–µ–ª—å:** –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ subscores
- **–í—Ä–µ–º—è:** ~45 –º–∏–Ω—É—Ç –Ω–∞ GPU
- **–û–∂–∏–¥–∞–µ–º—ã–π MAE:** ~0.35-0.45 –ø–æ overall, ~0.5 –ø–æ subscores

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –æ–±—É—á–µ–Ω–∏–µ–º

- [x] –î–∞—Ç–∞—Å–µ—Ç –æ—á–∏—â–µ–Ω (v1.3)
- [x] Inconsistent –æ—Ç–≤–µ—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
- [x] Train/Val/Test split —Å–æ–∑–¥–∞–Ω
- [x] Sample weights –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [x] –ö–æ–Ω—Ñ–∏–≥ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω
- [ ] Real-world eval set —Å–æ–±—Ä–∞–Ω (50-100 –æ—Ç–≤–µ—Ç–æ–≤)
- [ ] Baseline –º–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞
- [ ] Encoder –º–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞ test set –ø–æ—Å—á–∏—Ç–∞–Ω—ã
- [ ] –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å real data –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–°–∏–Ω—Ç–µ—Ç–∏–∫–∞:** 100% —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
   - **–†–∏—Å–∫:** –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –Ω–∞ —Å—Ç–∏–ª—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
   - **–†–µ—à–µ–Ω–∏–µ:** –°–æ–±—Ä–∞—Ç—å real data –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

2. **Inconsistent:** 550 –æ—Ç–≤–µ—Ç–æ–≤ —Å –ø–æ–Ω–∏–∂–µ–Ω–Ω—ã–º –≤–µ—Å–æ–º
   - **–†–∏—Å–∫:** –ú–æ–¥–µ–ª—å –º–æ–∂–µ—Ç –∏—Ö –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å
   - **–†–µ—à–µ–Ω–∏–µ:** –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ weighted vs normal

3. **Low-band:** –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ "–≥—Ä—è–∑–Ω—ã—Ö" –ø—Ä–∏–º–µ—Ä–æ–≤
   - **–†–∏—Å–∫:** –ú–æ–¥–µ–ª—å –ø–ª–æ—Ö–æ —Ä–∞–∑–ª–∏—á–∞–µ—Ç —Å–ª–∞–±—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
   - **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ real low-band –¥–∞–Ω–Ω—ã—Ö

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–û–±—É—á–∏—Ç—å baseline** (TF-IDF + LightGBM)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç
   - –ü–æ–ª—É—á–∏—Ç—å baseline –º–µ—Ç—Ä–∏–∫–∏

2. **–û–±—É—á–∏—Ç—å encoder –º–æ–¥–µ–ª—å** (DistilBERT)
   - –û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è production
   - Multi-task –¥–ª—è subscores

3. **–°–æ–±—Ä–∞—Ç—å real data** (50-100 –æ—Ç–≤–µ—Ç–æ–≤)
   - Part 2/3 –æ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
   - –û—Ü–µ–Ω–µ–Ω–Ω—ã–µ —ç–∫–∑–∞–º–µ–Ω–∞—Ç–æ—Ä–æ–º

4. **–°—Ä–∞–≤–Ω–∏—Ç—å –Ω–∞ real data**
   - –ï—Å–ª–∏ MAE –Ω–∞ real > MAE –Ω–∞ synthetic –Ω–∞ 0.2+ ‚Üí –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ
   - –ï—Å–ª–∏ MAE –±–ª–∏–∑–∫–æ ‚Üí –º–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç

5. **Fine-tune –Ω–∞ real data**
   - –ï—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ real –¥–∞–Ω–Ω—ã—Ö (100+)
   - Fine-tune –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–ª–æ–∏ –Ω–∞ real

